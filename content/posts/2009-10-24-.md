---
title: ""
date: 2009-10-24
draft: false
tags: ["migrated-from-gist"]
gist_id: "217535"
---

<?php
	// get logged blip user
	public function getLoggedBlipUser() {
		$endpoint = self::$api_url . '/profile';

		$json = $this->request($endpoint);
		if ($this->status > 300) {
			return false;
		} else return $json->login;
	}

	private function request($endpoint) {
		try {
			$response = $this->consumer->sendRequest($endpoint, array(), $this->method);
			$reply = json_decode($response->getBody());
			$this->status = $response->getStatus();
			$this->phrase = $response->getReasonPhrase();

			return $reply;
		} catch (HTTP_OAuth_Consumer_Exception_InvalidResponse $e) {
			echo $e->getBody();
		}
	}
?>
